## 赛题简介

飞桨深度学习框架提供了动态图编程的模式来开发深度学习模型（方便开发与调试），
以动转静的方式将模型转为静态图来进行推理部署（方便全图优化和高性能运行）。
本赛题，要求为飞桨框架实现一个 python 层的 JIT compiler，
可以通过在 python 代码执行前通过分析 python bytecode，来产出计算子图，
对子图进行图优化，并在某个计算后端上进行执行。在飞桨框架实现既可以动态图灵活开发又可以高效运行的深度学习模型开发方式。

## 赛题要求

分析用飞桨框架实现的 ResNet 网络的 python bytecode，将其编译成一个计算图。
将一个示例的，含有控制流的，用飞桨框架实现的网络，编译成多个计算子图。
将编译成的计算子图转为其他后端的计算图表示，并运行推理。

## 赛题任务

1. 添加更多字节码指令的转换。
1. 优化 call_function 等一些已经实现的字节码指令的转换。
1. 实现类似 VariableTracker 的机制
1. 增强 Python 代码生成的高效性和可读性
1. 实现 ONNX RUNTIME，TensorRT 等后端并运行推理
1. 实现 replace_pattern API 以及优化 Pass（进阶任务）
1. 增加更多测试文件，转换更多网络（进阶任务）
1. 添加文档（进阶任务）

### 任务一：添加更多字节码转换

Python中有相当多的字节码指令，我们可以优先添加在不同Python版本中出现次数比较多的字节码，
这些字节码中有些可能几乎不会用到，但是为了良好的用户体验，我们也可以进行一些基础的实现，
而不必深入优化它的性能。

暂未实现的字节码指令的转换（整体进度 0/124）
| 任务序号 | 字节码                           |   出现次数 | Python 版本             | 认领人   | PR   |
|----:|:------------------------------|-------:|:------------------|:------|:-----|
|   1 | LIST_APPEND                   |      4 | 3.8/3.9/3.10/3.11 |       |      |
|   2 | IMPORT_NAME                   |      4 | 3.8/3.9/3.10/3.11 |       |      |
|   3 | POP_EXCEPT                    |      4 | 3.8/3.9/3.10/3.11 |       |      |
|   4 | STORE_NAME                    |      4 | 3.8/3.9/3.10/3.11 |       |      |
|   5 | DELETE_NAME                   |      4 | 3.8/3.9/3.10/3.11 |       |      |
|   6 | UNPACK_SEQUENCE               |      4 | 3.8/3.9/3.10/3.11 |       |      |
|   7 | FOR_ITER                      |      4 | 3.8/3.9/3.10/3.11 |       |      |
|   8 | UNPACK_EX                     |      4 | 3.8/3.9/3.10/3.11 |       |      |
|   9 | STORE_ATTR                    |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  10 | DELETE_ATTR                   |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  11 | STORE_GLOBAL                  |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  12 | DELETE_GLOBAL                 |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  13 | LOAD_NAME                     |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  14 | BUILD_SET                     |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  15 | IMPORT_FROM                   |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  16 | EXTENDED_ARG                  |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  17 | JUMP_FORWARD                  |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  18 | JUMP_IF_FALSE_OR_POP          |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  19 | JUMP_IF_TRUE_OR_POP           |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  20 | SET_ADD                       |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  21 | DELETE_FAST                   |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  22 | RAISE_VARARGS                 |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  23 | MAKE_FUNCTION                 |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  24 | BUILD_SLICE                   |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  25 | LOAD_CLOSURE                  |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  26 | LOAD_DEREF                    |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  27 | STORE_DEREF                   |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  28 | DELETE_DEREF                  |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  29 | MAP_ADD                       |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  30 | LOAD_CLASSDEREF               |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  31 | YIELD_VALUE                   |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  32 | GET_YIELD_FROM_ITER           |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  33 | NOP                           |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  34 | UNARY_POSITIVE                |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  35 | UNARY_NEGATIVE                |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  36 | GET_AITER                     |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  37 | GET_ANEXT                     |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  38 | BEFORE_ASYNC_WITH             |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  39 | SETUP_ANNOTATIONS             |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  40 | DELETE_SUBSCR                 |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  41 | GET_ITER                      |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  42 | END_ASYNC_FOR                 |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  43 | PRINT_EXPR                    |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  44 | nan                           |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  45 | IMPORT_STAR                   |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  46 | FORMAT_VALUE                  |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  47 | LOAD_BUILD_CLASS              |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  48 | BUILD_STRING                  |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  49 | CALL_FUNCTION_EX              |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  50 | GET_AWAITABLE                 |      4 | 3.8/3.9/3.10/3.11 |       |      |
|  51 | ROT_THREE                     |      3 | 3.8/3.9/3.10      |       |      |
|  52 | LOAD_ASSERTION_ERROR          |      3 | 3.9/3.10/3.11     |       |      |
|  53 | LIST_EXTEND                   |      3 | 3.9/3.10/3.11     |       |      |
|  54 | RERAISE                       |      3 | 3.9/3.10/3.11     |       |      |
|  55 | SETUP_ASYNC_WITH              |      3 | 3.8/3.9/3.10      |       |      |
|  56 | WITH_EXCEPT_START             |      3 | 3.9/3.10/3.11     |       |      |
|  57 | SET_UPDATE                    |      3 | 3.9/3.10/3.11     |       |      |
|  58 | DICT_MERGE                    |      3 | 3.9/3.10/3.11     |       |      |
|  59 | DICT_UPDATE                   |      3 | 3.9/3.10/3.11     |       |      |
|  60 | LIST_TO_TUPLE                 |      3 | 3.9/3.10/3.11     |       |      |
|  61 | ROT_TWO                       |      3 | 3.8/3.9/3.10      |       |      |
|  62 | SETUP_WITH                    |      3 | 3.8/3.9/3.10      |       |      |
|  63 | INPLACE_RSHIFT                |      3 | 3.8/3.9/3.10      |       |      |
|  64 | SETUP_FINALLY                 |      3 | 3.8/3.9/3.10      |       |      |
|  65 | DUP_TOP                       |      3 | 3.8/3.9/3.10      |       |      |
|  66 | DUP_TOP_TWO                   |      3 | 3.8/3.9/3.10      |       |      |
|  67 | ROT_FOUR                      |      3 | 3.8/3.9/3.10      |       |      |
|  68 | BINARY_MATRIX_MULTIPLY        |      3 | 3.8/3.9/3.10      |       |      |
|  69 | INPLACE_MODULO                |      3 | 3.8/3.9/3.10      |       |      |
|  70 | YIELD_FROM                    |      3 | 3.8/3.9/3.10      |       |      |
|  71 | INPLACE_LSHIFT                |      3 | 3.8/3.9/3.10      |       |      |
|  72 | BINARY_MODULO                 |      3 | 3.8/3.9/3.10      |       |      |
|  73 | JUMP_ABSOLUTE                 |      3 | 3.8/3.9/3.10      |       |      |
|  74 | POP_BLOCK                     |      3 | 3.8/3.9/3.10      |       |      |
|  75 | MATCH_MAPPING                 |      2 | 3.10/3.11         |       |      |
|  76 | MATCH_CLASS                   |      2 | 3.10/3.11         |       |      |
|  77 | JUMP_IF_NOT_EXC_MATCH         |      2 | 3.9/3.10          |       |      |
|  78 | MATCH_KEYS                    |      2 | 3.10/3.11         |       |      |
|  79 | MATCH_SEQUENCE                |      2 | 3.10/3.11         |       |      |
|  80 | GET_LEN                       |      2 | 3.10/3.11         |       |      |
|  81 | COPY_FREE_VARS                |      1 | 3.11              |       |      |
|  82 | SWAP                          |      1 | 3.11              |       |      |
|  83 | POP_JUMP_FORWARD_IF_FALSE     |      1 | 3.11              |       |      |
|  84 | POP_JUMP_FORWARD_IF_TRUE      |      1 | 3.11              |       |      |
|  85 | COPY                          |      1 | 3.11              |       |      |
|  86 | BINARY_OP                     |      1 | 3.11              |       |      |
|  87 | SEND                          |      1 | 3.11              |       |      |
|  88 | POP_JUMP_FORWARD_IF_NOT_NONE  |      1 | 3.11              |       |      |
|  89 | POP_JUMP_BACKWARD_IF_FALSE    |      1 | 3.11              |       |      |
|  90 | RESUME                        |      1 | 3.11              |       |      |
|  91 | POP_JUMP_BACKWARD_IF_NONE     |      1 | 3.11              |       |      |
|  92 | POP_JUMP_BACKWARD_IF_NOT_NONE |      1 | 3.11              |       |      |
|  93 | ASYNC_GEN_WRAP                |      1 | 3.11              |       |      |
|  94 | POP_JUMP_FORWARD_IF_NONE      |      1 | 3.11              |       |      |
|  95 | KW_NAMES                      |      1 | 3.11              |       |      |
|  96 | CALL                          |      1 | 3.11              |       |      |
|  97 | PRECALL                       |      1 | 3.11              |       |      |
|  98 | JUMP_BACKWARD_NO_INTERRUPT    |      1 | 3.11              |       |      |
|  99 | MAKE_CELL                     |      1 | 3.11              |       |      |
| 100 | JUMP_BACKWARD                 |      1 | 3.11              |       |      |
| 101 | PREP_RERAISE_STAR             |      1 | 3.11              |       |      |
| 102 | ROT_N                         |      1 | 3.10              |       |      |
| 103 | RETURN_GENERATOR              |      1 | 3.11              |       |      |
| 104 | BEFORE_WITH                   |      1 | 3.11              |       |      |
| 105 | END_FINALLY                   |      1 | 3.8               |       |      |
| 106 | BUILD_LIST_UNPACK             |      1 | 3.8               |       |      |
| 107 | BUILD_MAP_UNPACK              |      1 | 3.8               |       |      |
| 108 | BUILD_MAP_UNPACK_WITH_CALL    |      1 | 3.8               |       |      |
| 109 | BUILD_TUPLE_UNPACK            |      1 | 3.8               |       |      |
| 110 | BUILD_SET_UNPACK              |      1 | 3.8               |       |      |
| 111 | WITH_CLEANUP_FINISH           |      1 | 3.8               |       |      |
| 112 | WITH_CLEANUP_START            |      1 | 3.8               |       |      |
| 113 | BUILD_TUPLE_UNPACK_WITH_CALL  |      1 | 3.8               |       |      |
| 114 | CALL_FINALLY                  |      1 | 3.8               |       |      |
| 115 | POP_FINALLY                   |      1 | 3.8               |       |      |
| 116 | BEGIN_FINALLY                 |      1 | 3.8               |       |      |
| 117 | COPY_DICT_WITHOUT_KEYS        |      1 | 3.10              |       |      |
| 118 | GEN_START                     |      1 | 3.10              |       |      |
| 119 | CACHE                         |      1 | 3.11              |       |      |
| 120 | PUSH_NULL                     |      1 | 3.11              |       |      |
| 121 | PUSH_EXC_INFO                 |      1 | 3.11              |       |      |
| 122 | CHECK_EXC_MATCH               |      1 | 3.11              |       |      |
| 123 | CHECK_EG_MATCH                |      1 | 3.11              |       |      |
| 124 | POP_JUMP_BACKWARD_IF_TRUE     |      1 | 3.11              |       |      |

### 任务二：对已经实现的字节码转换函数进行优化

现有的许多字节码转换的实现仍有改进空间，例如CALL_FUNCTION里就有许多需要完善的部分。

需要完善的字节码指令的转换（具体任务待添加）

### 任务三：VariableTracker 机制

VariableTracker 机制在实现许多功能上都至关重要，因此我们需要添加类 VariableTracker 机制。

具体任务待添加（预留序号125-174）

### 任务四：增强代码生成机制

现有的代码生成功能较为单一，仍有许多改进空间，我们可以随着其他任务的完成，逐步完善代码生成模块。

具体任务待添加（预留序号175-200）

### 任务五：为 PaddleFX 添加推理后端

本赛题的主要任务是实现一个 JIT 编译器，但是 PaddleFX 现在还没有可用的后端运行推理，
现在所有代码的执行实际上还是使用了 Paddle 框架，因此添加推理后端是一个比较重要的任务。

计划支持的后端（0/5）
| 任务序号 | 后端                           |   认领人   | PR   |
|----:|:------------------------------|:------|:-----|
|   201 | ONNX RUNTIME                  |      |      |
|   202 | TensorRT                      |      |      |
|   203 | 待定                           |      |      |
|   204 | 待定                           |      |      |
|   205 | 待定                           |      |      |

### 任务六：实现 Pass 机制

Pass 机制在编译器中至关重要，虽然赛题对性能没有过高的要求，但是我们依然可以添加 Pass 机制，并实现相应的优化 Pass，
这个机制通常需要实现 replace_pattern API。

具体任务待添加（预留序号206-299）

### 任务七：添加测试文件

单元测试和覆盖率是软件开发过程中非常重要的一部分。通过单元测试，我们可以测试代码的正确性，减少程序出现错误的可能性。
而覆盖率则可以帮助我们了解我们的测试是否足够全面，以及我们的代码是否被充分测试。
因此我们需要为 PaddleFX 添加完整的单元测试机制。

具体任务待添加（预留序号300-399）

### 任务八：添加文档

单元测试和覆盖率是软件开发过程中非常重要的一部分。通过单元测试，我们可以测试代码的正确性，减少程序出现错误的可能性。
而覆盖率则可以帮助我们了解我们的测试是否足够全面，以及我们的代码是否被充分测试。
因此我们需要为 PaddleFX 添加完整的单元测试机制。

具体任务待添加（预留序号400-499）
